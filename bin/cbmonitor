#!/usr/bin/env swift
import AppKit

let pasteBoard = NSPasteboard.general()

var previousChangeCount: Int = pasteBoard.changeCount

while true {
  Thread.sleep(forTimeInterval: 0.1)
  let currentChangeCount = pasteBoard.changeCount
  if currentChangeCount != previousChangeCount {
    previousChangeCount = currentChangeCount
    let process = Process()
    process.launchPath = "/usr/bin/env"
    process.arguments = ["env", "cbscripts"]
    process.launch()
    process.waitUntilExit()
  }
}
