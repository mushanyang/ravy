#!/usr/bin/env bash

_getpaste () {
  pbpaste
}

content=$(_getpaste)

pattern='^open:\[([^]]*)\]$'
action='open \1'

if [[ $content =~ $pattern ]]; then
  echo "match: '$BASH_REMATCH'"
  real_action=$(printf "%s" $content | sed -E "s/$pattern/$action/")
  echo "action: $real_action"
  $real_action
fi
